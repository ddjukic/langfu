#!/bin/bash

echo "ğŸ”¨ Running pre-push hook..."
echo "ğŸ“‹ Building project to ensure no broken code is pushed..."

# Run the build command
echo "âš™ï¸ Running: pnpm build"
if ! pnpm build; then
    echo ""
    echo "âŒ BUILD FAILED!"
    echo ""
    echo "ğŸš« Push blocked due to build failure."
    echo "ğŸ’¡ Please fix the build errors and try again."
    echo ""
    echo "To debug:"
    echo "  1. Run 'pnpm build' locally to see detailed errors"
    echo "  2. Fix any TypeScript, linting, or build issues"
    echo "  3. Commit your fixes"
    echo "  4. Try pushing again"
    echo ""
    exit 1
fi

echo "âœ… Build successful!"
echo "ğŸš€ Proceeding with push..."